<!DOCTYPE html><html><head><meta charset="utf-8"><title>Ace Editor - Tabs with Dual Panels</title><style>body,html{margin:0;height:100%;background-color:#1e1e1e;font-family:Consolas,"Courier New",monospace;color:#fff;overflow:hidden}#container{display:flex;flex-direction:column;height:100%}#tab-bar{background-color:#1e1e1e;display:flex;border-bottom:1px solid #333;overflow-x:auto;white-space:nowrap;flex-shrink:0}.tab{color:#ccc;background-color:transparent;padding:5px 12px;margin-right:2px;cursor:pointer;border:none;user-select:none}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-thumb{background:silver;border-radius:6px}.tab.active{color:#fff;background-color:#2d2d2d;font-weight:700;border-radius:0;border-bottom:2px solid #6dc8ff}.tab.plus-tab{color:#ccc;font-weight:700;background-color:transparent}.tab.plus-tab:hover{background-color:#333;color:#fff}#editor-container{flex-grow:1;height:100%}#editor{height:100%;width:100%;font-size:14px}.ace_editor{background-color:#1b1c1a!important;color:#f8f8f2!important}.ace_gutter{background:#1b1c1a!important;color:#888!important}.ace_gutter-cell{color:#888!important}.ace_scrollbar-h,.ace_scrollbar-v{display:none!important}.tab .close-btn{margin-left:12px;cursor:pointer;color:#ccc;font-weight:700;user-select:none}button{position:fixed;left:50%;transform:translateX(-50%);z-index:1000;color:#fff;border:none;padding:12px 24px;border-radius:25px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 4px 15px rgba(0,0,0,.3);transition:all .3s ease;text-transform:uppercase;letter-spacing:1px}#test-button{top:20px;background:linear-gradient(45deg,#ff6b6b,#4ecdc4)}#test-button:hover{transform:translateX(-50%) scale(1.05);box-shadow:0 6px 20px rgba(0,0,0,.4)}#test-button:active{transform:translateX(-50%) scale(.95)}#second-button{top:60px;background:linear-gradient(45deg,#ffb347,#fc3);display:none}#second-button:hover{transform:translateX(-50%) scale(1.05)}#second-button:active{transform:translateX(-50%) scale(.95)}.sliding-panel{position:fixed;top:0;right:-400px;width:400px;height:100vh;background:linear-gradient(135deg,#2d2d2d,#1e1e1e);border-left:2px solid #6dc8ff;z-index:999;transition:right .4s ease-in-out;box-shadow:-5px 0 20px rgba(0,0,0,.5);overflow-y:auto;padding:20px;box-sizing:border-box;display:flex;flex-direction:column}.sliding-panel.open{right:0}.sliding-panel h2{color:#6dc8ff;margin-top:0;border-bottom:2px solid #6dc8ff;padding-bottom:10px}.sliding-panel p{color:#ccc;line-height:1.6;margin-bottom:15px}.panel-item{margin-bottom:10px;padding:12px 16px;display:block;border:1px solid #333;border-radius:6px;background:#2d2d2d;color:#fff;cursor:pointer}.panel-item:hover{background:#404040;transform:translateX(5px);box-shadow:0 3px 10px rgba(109,200,255,.3);border-left-color:#4ecdc4}.panel-item:active{transform:translateX(3px);background:#2a2a2a}.remove-btn{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:#ff4757;color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;cursor:pointer;transition:all .3s ease;z-index:10}.remove-btn:hover{background:#ff3742;transform:translateY(-50%) scale(1.1);box-shadow:0 2px 8px rgba(255,71,87,.4)}.remove-btn:active{transform:translateY(-50%) scale(.9)}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.14/ace.js"></script></head><body><div id="container"><div id="tab-bar"></div><div id="editor-container"><div id="editor">print("Hello, Lua!")</div></div></div><button id="test-button">Test Panel</button><button id="second-button">Second Panel</button><div id="sliding-panel" class="sliding-panel"><h2>Scripts List</h2><p>Click any script to open it!</p></div><div id="second-sliding-panel" class="sliding-panel"><h2>Settings</h2><p>This is the second panel content.</p><div class="panel-item" onclick='alert("General Settings Clicked")'>General Settings</div><div class="panel-item" onclick='alert("More Settings Clicked")'>More Settings</div></div><script>const editor = ace.edit("editor");
      editor.setTheme("ace/theme/monokai");
      editor.session.setMode("ace/mode/lua");
      editor.setShowPrintMargin(false);
      const tabs = {};
      let currentTab = null;
      let tabCounter = 1;

      function createTab(name = "Untitled Tab", initialCode = "") {
        if (currentTab) tabs[currentTab] = editor.getValue();
        const tabId = "tab_" + tabCounter++;
        tabs[tabId] = initialCode;
        currentTab = tabId;
        const tabButton = document.createElement("div");
        tabButton.className = "tab active";
        tabButton.dataset.tabId = tabId;
        const tabText = document.createElement("span");
        tabText.innerText = name;
        tabButton.appendChild(tabText);
        const closeBtn = document.createElement("span");
        closeBtn.className = "close-btn";
        closeBtn.innerText = "Ã—";
        closeBtn.title = "Close tab";
        tabButton.appendChild(closeBtn);
        document.querySelectorAll(".tab").forEach((tab) => tab.classList.remove("active"));
        document.getElementById("tab-bar").insertBefore(tabButton, document.querySelector(".tab.plus-tab"));
        editor.setValue(initialCode, -1);
        tabButton.classList.add("active");
        updateCloseButtonsVisibility();
        tabText.addEventListener("click", () => {
          if (currentTab) tabs[currentTab] = editor.getValue();
          currentTab = tabButton.dataset.tabId;
          editor.setValue(tabs[currentTab], -1);
          document.querySelectorAll(".tab").forEach((tab) => tab.classList.remove("active"));
          tabButton.classList.add("active");
        });
        closeBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          const allTabs = Array.from(document.querySelectorAll(".tab:not(.plus-tab)"));
          if (allTabs.length === 1) return;
          delete tabs[tabId];
          tabButton.remove();
          if (currentTab === tabId) {
            const nextTab = allTabs[0];
            currentTab = nextTab.dataset.tabId;
            editor.setValue(tabs[currentTab] || "", -1);
            document.querySelectorAll(".tab").forEach((tab) => tab.classList.remove("active"));
            nextTab.classList.add("active");
          }
          updateCloseButtonsVisibility();
        });
      }

      function updateCloseButtonsVisibility() {
        const allTabs = Array.from(document.querySelectorAll("#tab-bar .tab")).filter((t) => t.innerText !== "+");
        allTabs.forEach((tab) => {
          const closeBtn = tab.querySelector(".close-btn");
          closeBtn.style.visibility = allTabs.length > 1 ? "visible" : "hidden";
        });
      }
      const plusTab = document.createElement("div");
      plusTab.className = "tab plus-tab";
      plusTab.innerText = "+";
      plusTab.addEventListener("click", () => createTab("Untitled Tab", 'print("Hello World")'));
      document.getElementById("tab-bar").appendChild(plusTab);
      createTab("Untitled Tab", 'print("Hello World")');
      // Panel logic
      const testButton = document.getElementById("test-button");
      const secondButton = document.getElementById("second-button");
      const panel1 = document.getElementById("sliding-panel");
      const panel2 = document.getElementById("second-sliding-panel");
      let currentlyOpenPanel = null;

      function switchPanel(newPanel, button, label) {
        if (currentlyOpenPanel && currentlyOpenPanel !== newPanel) {
          currentlyOpenPanel.classList.remove("open");
          setTimeout(() => {
            newPanel.classList.add("open");
            currentlyOpenPanel = newPanel;
          }, 400);
        } else if (!currentlyOpenPanel) {
          newPanel.classList.add("open");
          currentlyOpenPanel = newPanel;
        } else if (currentlyOpenPanel === newPanel) {
          newPanel.classList.remove("open");
          currentlyOpenPanel = null;
        }
        testButton.textContent = currentlyOpenPanel === panel1 ? "Close Panel" : "Test Panel";
        secondButton.textContent = currentlyOpenPanel === panel2 ? "Close Panel" : "Second Panel";
      }
      testButton.addEventListener("click", () => switchPanel(panel1, testButton, "Test Panel"));
      secondButton.addEventListener("click", () => switchPanel(panel2, secondButton, "Second Panel"));

      function openPanel(name) {
        const panel1 = document.getElementById("sliding-panel");
        const panel2 = document.getElementById("second-sliding-panel");
        panel1.classList.remove("open");
        panel2.classList.remove("open");
        if (name === "panel1") {
          panel1.classList.add("open");
        } else if (name === "panel2") {
          panel2.classList.add("open");
        }
      }

      function closePanels() {
        document.getElementById("sliding-panel").classList.remove("open");
        document.getElementById("second-sliding-panel").classList.remove("open");
      }

      function resizePanel(width, height) {
        const panel1 = document.getElementById("sliding-panel");
        const panel2 = document.getElementById("second-sliding-panel");
        panel1.style.width = width + "px";
        panel1.style.height = height + "px";
        panel2.style.width = width + "px";
        panel2.style.height = height + "px";
      }

      function clearScriptButtons() {
        const panel = document.getElementById("sliding-panel");
        const items = panel.querySelectorAll(".panel-item");
        items.forEach((item) => item.remove());
      }

      function addScriptButton(name, content) {
  const panel = document.getElementById("sliding-panel");
  const item = document.createElement("div");
  item.className = "panel-item";
  item.textContent = name;
  item.onclick = () => {
    window.chrome.webview.postMessage({
      type: "createTab",
      name: name,
      content: content,
    });
  };
  panel.appendChild(item);
}
</script></body></html>
